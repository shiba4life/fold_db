# Task 33-6: Remove legacy cryptographic modules and update references

**Status**: InProgress  
**Assigned to**: Code Mode  
**Estimated effort**: 4-6 hours  
**Created**: 2025-06-19T17:10:26Z  
**Updated**: 2025-06-19T17:10:26Z  

## Summary

Remove redundant legacy cryptographic modules and update all references throughout the codebase to use the unified cryptographic module exclusively, following the successful migration pattern established in Task 33-5.

## Context

Following the completion of:
- Task 33-1: Cryptographic module analysis (Review)
- Task 33-2: Unified architecture design (Review)  
- Task 33-3: Core primitives layer implementation (Review)
- Task 33-4: Operational layer implementation (Review)
- Task 33-5: Migration pattern established (Review)

This task removes redundant legacy cryptographic modules and ensures all references use the unified module exclusively.

## Acceptance Criteria

- [ ] **Legacy Module Removal Strategy Implemented**:
  - [ ] Remove duplicated functionality in fragmented crypto modules
  - [ ] Clean up redundant configuration patterns in `src/config/crypto.rs`
  - [ ] Remove duplicate key management operations across various modules
  - [ ] Clean up redundant encryption/decryption implementations
  - [ ] Remove legacy adapter code where migration is complete

- [ ] **Removal Implementation Phases**:
  - [ ] **Phase 1**: Remove legacy adapter code, keep only unified module delegation
  - [ ] **Phase 2**: Clean up redundant cryptographic configuration patterns
  - [ ] **Phase 3**: Remove duplicate key management operations
  - [ ] **Phase 4**: Update all import statements to remove references to deleted functionality
  - [ ] **Phase 5**: Clean up unused dependencies and obsolete cryptographic patterns
  - [ ] **Phase 6**: Remove remaining duplicate error handling in crypto modules

- [ ] **Reference Updates**:
  - [ ] Update all modules that import legacy cryptographic functionality
  - [ ] Replace legacy crypto types with unified types from `src/unified_crypto/types.rs`
  - [ ] Update error handling to use unified `CryptoError` types
  - [ ] Consolidate configuration loading to use `UnifiedCryptoConfig`
  - [ ] Update authentication and verification modules to use unified operations

- [ ] **Safety Measures**:
  - [ ] Run comprehensive tests after each removal phase
  - [ ] Maintain git history for rollback capability
  - [ ] Document all removed functionality in task file
  - [ ] Verify no references remain to deleted code
  - [ ] Ensure unified module provides equivalent functionality

- [ ] **Key Removal Points**:
  - [ ] Remove duplicate encryption logic from various database modules
  - [ ] Clean up redundant key management from CLI and network modules
  - [ ] Remove duplicate configuration loading patterns
  - [ ] Eliminate redundant error handling implementations
  - [ ] Remove obsolete authentication and verification patterns

## Technical Implementation

### Primary Removal Targets

1. **Database Operations**:
   - Remove redundant encryption patterns that duplicate unified crypto functionality
   - Clean up legacy backup encryption that's now handled by `src/unified_crypto/backup.rs`
   - Remove duplicate metadata encryption operations

2. **CLI Operations**:
   - Remove redundant crypto command implementations
   - Clean up legacy key management CLI operations
   - Remove duplicate signing and verification logic

3. **Configuration**:
   - Remove redundant crypto configuration patterns
   - Clean up legacy configuration loading
   - Consolidate to unified configuration system

4. **Network Operations**:
   - Remove redundant key propagation implementations
   - Clean up duplicate network crypto operations

5. **Authentication**:
   - Remove redundant verification implementations
   - Clean up legacy authentication patterns

### Removal Strategy

1. **Incremental Removal**: Remove code incrementally with testing between phases
2. **Reference Tracking**: Ensure all references to removed code are updated
3. **Security Validation**: Verify no security functionality is lost
4. **Test Coverage**: Maintain test coverage for equivalent unified functionality
5. **Documentation**: Document all removed functionality for audit trail

### Security Considerations

- Ensure no security functionality is lost during removal
- Validate that all cryptographic operations continue to work through unified module
- Maintain audit logging and security monitoring capabilities
- Verify key rotation and lifecycle management continues to function

## Dependencies

- **Depends on**: Task 33-5 (Migration pattern complete - Review)
- **Blocks**: Task 33-7 (Comprehensive testing)

## Definition of Done

- All redundant legacy cryptographic modules successfully removed
- All references updated to use unified cryptographic module exclusively
- No loss of cryptographic functionality
- Comprehensive test coverage maintained for unified module functionality
- Security audit logging continues to function properly
- Clean, consolidated cryptographic architecture achieved
- Documentation updated to reflect unified module usage only
- Code review completed and approved