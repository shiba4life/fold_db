# [2-2] Add database functions for HashAtomRef

[Back to task list](./tasks.md)

## Description

Extend `DbOperations` with basic persistence functions for `AtomRefHash`.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-06-07 12:05:00 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2025-06-07 12:06:00 | user_approves | Proposed | Agreed | User approved task | User |
| 2025-06-07 12:07:00 | start_work | Agreed | InProgress | Implementation started | AI_Agent |
| 2025-06-07 12:45:00 | submit_for_review | InProgress | Review | Database helpers added | AI_Agent |
| 2025-06-07 12:46:00 | approve | Review | Done | Implementation accepted | User |

## Requirements

1. Add `create_hash_atom_ref`, `hash_insert`, and `hash_get` to `src/db_operations/atom_operations.rs`.
2. Store hash ARefs under `ref:{uuid}` keys.
3. Ensure operations return errors from underlying storage when persistence fails.

## Implementation Plan

1. Import `AtomRefHash` in `atom_operations.rs`.
2. Implement helper methods following existing single and range patterns.
3. Write minimal doc comments.

## Test Plan

- Compilation succeeds with `cargo test`.
- Unit tests exercise the helpers indirectly via `AtomRefHash` tests.

## Verification

- [x] Functions added to `DbOperations`.
- [x] Methods store and retrieve entries correctly.

## Files Modified

- `src/db_operations/atom_operations.rs`
