# [2-1] Implement AtomRefHash struct

[Back to task list](./tasks.md)

## Description

Create the `AtomRefHash` struct with basic CRUD-style methods for managing key-to-atom mappings.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-06-07 12:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2025-06-07 12:01:00 | user_approves | Proposed | Agreed | User approved task | User |
| 2025-06-07 12:02:00 | start_work | Agreed | InProgress | Implementation started | AI_Agent |
| 2025-06-07 12:40:00 | submit_for_review | InProgress | Review | Struct implemented with tests | AI_Agent |
| 2025-06-07 12:41:00 | approve | Review | Done | Implementation accepted | User |

## Requirements

1. Define `AtomRefHash` struct in `src/atom/atom_ref_hash.rs`.
2. Implement methods: `new`, `set_atom_uuid`, `get_atom_uuid`, `remove_atom_uuid`, `contains_key`, `keys`, `len`, `is_empty`, `clear`.
3. Implement `AtomRefBehavior` trait for the new struct.
4. Export the struct from `src/atom/mod.rs`.
5. Add unit tests verifying core operations.

## Implementation Plan

1. Create new file `src/atom/atom_ref_hash.rs` with struct and methods.
2. Update `src/atom/mod.rs` to include new module and export it.
3. Add tests in `src/atom/atom_ref_hash_tests.rs` mirroring existing range tests.
4. Run clippy and cargo tests to ensure compilation.

## Test Plan

- Unit test `test_atom_ref_hash_basic_ops` verifies all methods work.
- Compilation succeeds with `cargo test`.

## Verification

- [x] Struct created with required methods
- [x] Trait implemented and exported
- [x] Unit tests added and passing

## Files Modified

- `src/atom/atom_ref_hash.rs`
- `src/atom/mod.rs`
- `src/atom/atom_ref_hash_tests.rs`
