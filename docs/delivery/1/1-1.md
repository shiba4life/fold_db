# [1-1] Add CollectionField variant to FieldVariant enum

[Back to task list](./tasks.md)

## Description

Re-introduce the Collection variant to the FieldVariant enum to support collection fields. This involves creating a CollectionField struct and adding it as a variant in the FieldVariant enum. The CollectionField should follow the same pattern as SingleField and RangeField.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-19 12:05:00 | Created | N/A | Proposed | Task file created | User |
| 2025-01-19 12:15:00 | user_approves | Proposed | Agreed | Task approved for implementation | User |
| 2025-01-19 12:16:00 | start_work | Agreed | InProgress | Started implementation | AI_Agent |
| 2025-01-19 12:25:00 | submit_for_review | InProgress | Review | Implementation complete, ready for review | AI_Agent |
| 2025-01-19 13:00:00 | approve | Review | Done | Task approved and completed | User |

## Requirements

1. Create a `CollectionField` struct in `src/schema/types/field/collection_field.rs`
2. Add Collection variant to `FieldVariant` enum in `src/schema/types/field/variant.rs`
3. Update the `Field` trait implementation for `FieldVariant` to handle Collection
4. Add Collection to the `FieldType` enum in `src/schema/types/field/common.rs`
5. Update serialization/deserialization logic for the Collection variant

## Implementation Plan

1. **Create CollectionField struct**:
   - Create new file `src/schema/types/field/collection_field.rs`
   - Define `CollectionField` struct with `inner: FieldCommon`
   - Use `impl_field!` macro to implement the Field trait
   - Add constructor methods

2. **Update FieldVariant enum**:
   - Add `Collection(CollectionField)` variant to `FieldVariant` in `variant.rs`
   - Update all match statements in the Field trait implementation
   - Update serialization to handle Collection variant

3. **Update FieldType enum**:
   - Add `Collection` to the `FieldType` enum
   - Update any match statements that use FieldType

4. **Update module exports**:
   - Export CollectionField from the field module
   - Update mod.rs files as needed

## Test Plan

1. **Unit Tests**:
   - Test CollectionField creation and field trait methods
   - Test FieldVariant with Collection variant
   - Test serialization/deserialization of Collection fields

2. **Compilation Tests**:
   - Ensure all code compiles without errors
   - Verify no unused code warnings

## Verification

- [x] CollectionField struct created and implements Field trait
- [x] FieldVariant enum includes Collection variant
- [x] All match statements handle Collection variant
- [x] Serialization/deserialization works for Collection fields
- [x] Unit tests pass
- [x] Code compiles without warnings

## Files Modified

- `src/schema/types/field/collection_field.rs` (new file)
- `src/schema/types/field/variant.rs`
- `src/schema/types/field/common.rs`
- `src/schema/types/field/mod.rs`
- `src/schema/field_factory.rs` (added collection field factory methods)