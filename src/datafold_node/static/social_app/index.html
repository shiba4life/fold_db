<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataFold Social</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/modern-styles.css">
    <link rel="stylesheet" href="/social_app/css/social.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon" id="logoIcon"></div>
                <h1>DataFold Social</h1>
            </div>
            <div class="user-status" id="userStatus">
                <span class="badge badge-primary">Not Connected</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Login Section (shown when not connected) -->
        <div id="loginSection" class="card mt-4">
            <div class="card-header">
                <h2>Connect to DataFold Network</h2>
            </div>
            <div class="card-body">
                <form id="loginForm" class="form">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="nodeId">Node ID</label>
                        <input type="text" id="nodeId" name="nodeId" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Connect</button>
                </form>
            </div>
        </div>

        <!-- Social Feed (hidden until connected) -->
        <div id="socialFeed" class="social-feed" style="display: none;">
            <!-- Create Post Section -->
            <div class="card mt-4">
                <div class="card-header">
                    <h2>Create Post</h2>
                </div>
                <div class="card-body">
                    <form id="createPostForm" class="form">
                        <div class="form-group">
                            <label for="postTitle">Title</label>
                            <input type="text" id="postTitle" name="postTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="postContent">Content</label>
                            <textarea id="postContent" name="postContent" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Post</button>
                    </form>
                </div>
            </div>

            <!-- Posts Feed -->
            <div class="card mt-4">
                <div class="card-header">
                    <h2>Recent Posts</h2>
                    <div class="card-header-actions">
                        <button id="refreshFeed" class="btn btn-icon">
                            <span id="refreshIcon"></span>
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="postsContainer" class="posts-container">
                        <!-- Posts will be dynamically inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- User Profile (hidden until connected) -->
        <div id="userProfile" class="card mt-4" style="display: none;">
            <div class="card-header">
                <h2>Your Profile</h2>
            </div>
            <div class="card-body">
                <form id="profileForm" class="form">
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" name="fullName">
                    </div>
                    <div class="form-group">
                        <label for="bio">Bio</label>
                        <textarea id="bio" name="bio"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-text">
                &copy; 2025 DataFold Social - Decentralized Social Network
            </div>
        </div>
    </footer>

    <!-- Load JavaScript modules -->
    <script src="/js/utils.js"></script>
    <script src="/social_app/js/icons.js"></script>
    <script src="/social_app/js/client.js"></script>
    <script src="/social_app/js/app.js"></script>

    <!-- Initialize icons -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Set logo icon
            document.getElementById('logoIcon').innerHTML = icons.users();
            // Set refresh icon
            document.getElementById('refreshIcon').innerHTML = icons.refresh();
        });
    </script>
</body>
</html>
